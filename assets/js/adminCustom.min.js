$(function(){$("#side-menu").metisMenu()});$(function(){$(window).bind("load resize",function(){var d=50;var e=(this.window.innerWidth>0)?this.window.innerWidth:this.screen.width;if(e<768){$("div.navbar-collapse").addClass("collapse");d=100}else{$("div.navbar-collapse").removeClass("collapse")}var c=((this.window.innerHeight>0)?this.window.innerHeight:this.screen.height)-1;c=c-d+600;if(c<1){c=1}if(c>d){$("#page-wrapper").css("min-height",(c)+"px")}});var a=window.location;var b=$("ul.nav a").filter(function(){return this.href==a}).addClass("active").parent();while(true){if(b.is("li")){b=b.parent().addClass("in").parent()}else{break}}});function initializeCheckBoxes(){$("input[type=checkbox]:not(.ak_modal input[type=checkbox]):not(input[type=checkbox][data-toggle])").each(function(){if($(this).is(":checked")){$(this).val("true")}else{$(this).val("false")}})}function initBootstrapToggle(){var a=$('input[type="checkbox"]');a.bootstrapToggle()}$(document).ready(function(){$.fn.DataTable.ext.pager.numbers_length=5;$(".ak-dataTable").DataTable({responsive:true});$(".posts-dataTable").DataTable({responsive:true,dom:'<"row"<"col-sm-12"f>>t<"row"<"col-sm-6"i><"col-sm-6"p>><"row"<"col-sm-12"l>>'});$(".product-categories-dataTable").DataTable({responsive:true,columns:[{width:"10%"},{width:"20%"},{width:"50%"},{width:"20%",orderable:false}],dom:'<"row"<"col-sm-12"f>>t<"row"<"col-sm-6"i><"col-sm-6"p>><"row"<"col-sm-12"l>>'});$(".settings-dataTable").DataTable({responsive:true,columns:[{width:"10%"},{width:"35%"},{width:"35%"},{width:"20%",orderable:false}],dom:'<"row"<"col-sm-12"f>>t<"row"<"col-sm-6"i><"col-sm-6"p>><"row"<"col-sm-12"l>>'});$(".promotions-dataTable").DataTable({responsive:true,columns:[{width:"20%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"30%"},{width:"10%"},{width:"10%",orderable:false}],order:[[1,"desc"]],dom:'<"row"<"col-sm-12"f>>t<"row"<"col-sm-6"i><"col-sm-6"p>><"row"<"col-sm-12"l>>'});$(".users-group-dataTable").DataTable({responsive:true,columns:[{width:"30%"},{width:"30%"},{width:"40%",orderable:false}],dom:'<"row"<"col-sm-12"f>>t<"row"<"col-sm-6"i><"col-sm-6"p>><"row"<"col-sm-12"l>>'});$(".users-dataTable").DataTable({responsive:true,columns:[{width:"5%"},{width:"15%"},{width:"20%"},{width:"20%"},{width:"20%"},{width:"20%",orderable:false}],dom:'<"row"<"col-sm-12"f>>t<"row"<"col-sm-6"i><"col-sm-6"p>><"row"<"col-sm-12"l>>'});$(".products-dataTable").DataTable({responsive:true,columns:[{width:"10%"},{width:"15%"},{width:"25%"},{width:"20%"},{width:"30%",orderable:false}],dom:'<"row"<"col-sm-12"f>>t<"row"<"col-sm-6"i><"col-sm-6"p>><"row"<"col-sm-12"l>>'});$(".newsletterEmails-dataTable").DataTable({responsive:true,columns:[{width:"50%"},{width:"50%"}],order:[[1,"desc"]],dom:'<"row"<"col-sm-12"f>>t<"row"<"col-sm-6"i><"col-sm-6"p>><"row"<"col-sm-12"l>>'});$(".newsletterCampaigns-dataTable").DataTable({responsive:true,columns:[{width:"30%"},{width:"30%"},{width:"30%"},{width:"10%"}],order:[[2,"desc"]],dom:'<"row"<"col-sm-12"f>>t<"row"<"col-sm-6"i><"col-sm-6"p>><"row"<"col-sm-12"l>>'});$(".calendar-dataTable").DataTable({responsive:true,searching:false,ordering:false,paging:false,info:false,});$(".tab-content div.fade").addClass("tab-pane");initializeCheckBoxes();initBootstrapToggle();$(".imgCont").hover(handlerImageIn,handlerImageOut);if(typeof tinymce!=="undefined"&&tinymce!==null){tinymce.init({selector:".editor",height:350,menubar:false,theme:"modern",plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste code"],toolbar1:"undo redo | insert | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link",content_css:["//fonts.googleapis.com/css?family=Lato:300,300i,400,400i","//www.tinymce.com/css/codepen.min.css"]})}$(":file").on("fileselect",function(e,f,c){var b=$(this).parents(".form-group").find(".hiddenLabel"),d=f>1?f+" files selected":c;if(b.length){b.val(d)}else{if(d){alert(d)}}});var a=$(".ak_modal");a.on("show.bs.modal",function(d){var c=$(d.relatedTarget);var b=$(this);if(!b.data("modal-href")){b.data("modal-href",c.attr("href"))}if(b.data("refresh")){b.removeData("refresh")}b.find(".modal-content").load(b.data("modal-href"),function(f,e,h){if(e==="error"){var g="Sorry but there was an error: ";console.log(g+h.status+" "+h.statusText)}else{initializeCheckBoxes();initBootstrapToggle()}})});a.on("hidden.bs.modal",function(d){var b=$(this);if(b.data("refresh")){var c=$(d.target);c.removeData("bs.modal").find(".modal-content").html("");$(this).modal("show")}});$(document).on("submit",".ak_modal form",function(d){d.preventDefault();var b=$(this).closest(".ak_modal");var c=$(this).serializeArray();c.push({name:"isAjax",value:true});$.ajax({url:$(this).attr("action"),data:c,method:"POST"}).success(function(e){}).fail(function(g,h,e){var f="Sorry but there was an error: ";console.log(f+g.status+" "+g.statusText+" "+e)}).complete(function(e){b.data("refresh",true);b.modal("toggle")})});$(document).on("change",'input[type=checkbox][data-toggle="toggle"]',function(){var b=$(this);if(this.checked){if(b.data("custom-on-val")){this.value=b.data("custom-on-val")}}else{if(b.data("custom-off-val")){this.value=b.data("custom-off-val")}}});$(".numeric").numeric({negative:false});$("#parent_category").on("change",function(){if($(this).val()!="1"){$("#parentCategoryId_input").val("0");$("#parentCategoryIdContainer").css("visibility","hidden")}else{$("#parentCategoryIdContainer").css("visibility","visible")}});$("#promotedFrom_input").datetimepicker({format:"DD/MM/YYYY HH:mm",ignoreReadonly:true});$("#promotedTo_input").datetimepicker({format:"DD/MM/YYYY HH:mm",ignoreReadonly:true});$(document).ready(function(){$("#productCategoryId_input").on("change",function(){$.ajax({type:"POST",url:getContextPath()+"/admin/ajaxAction/updateSecondaryProductCategorySelect",data:({currentProductCategoryId:$("#productCategoryId_input").val()}),success:function(b){$("#secondaryProductCategoryId_input").find("option").remove().end().append(b).val("")},error:function(){}})})})});function handlerImageIn(){var a=$(this).height();var b=$(this).find(".btn");b.css("visibility","visible").css("top","-"+a/3+"px")}function handlerImageOut(){var a=$(this).find(".btn");a.css("visibility","hidden").css("top","0")}function previewImage(c){var a=new FileReader();a.readAsDataURL(c.files[0]);var b=$(c).closest("form").find("img[data-preview]");a.onload=function(d){b[0].src=d.target.result}}function getContextPath(){return window.location.pathname.substring(0,window.location.pathname.indexOf("/",2))}$(document).on("change","input[type=checkbox]",function(){if($(this).is(":checked")){$(this).val("true")}else{$(this).val("false")}});$(document).on("change",":file",function(){var a=$(this),c=a.get(0).files?a.get(0).files.length:1,b=a.val().replace(/\\/g,"/").replace(/.*\//,"");a.trigger("fileselect",[c,b]);previewImage(this)});(function(a){a.fn.numeric=function(d,e){if(typeof d==="boolean"){d={decimal:d}}d=d||{};if(typeof d.negative=="undefined"){d.negative=true}var b=(d.decimal===false)?"":d.decimal||".";var c=(d.negative===true)?true:false;var e=typeof e=="function"?e:function(){};return this.data("numeric.decimal",b).data("numeric.negative",c).data("numeric.callback",e).keypress(a.fn.numeric.keypress).keyup(a.fn.numeric.keyup).blur(a.fn.numeric.blur)};a.fn.numeric.keypress=function(g){var b=a.data(this,"numeric.decimal");var c=a.data(this,"numeric.negative");var d=g.charCode?g.charCode:g.keyCode?g.keyCode:0;if(d==13&&this.nodeName.toLowerCase()=="input"){return true}else{if(d==13){return false}}var f=false;if((g.ctrlKey&&d==97)||(g.ctrlKey&&d==65)){return true}if((g.ctrlKey&&d==120)||(g.ctrlKey&&d==88)){return true}if((g.ctrlKey&&d==99)||(g.ctrlKey&&d==67)){return true}if((g.ctrlKey&&d==122)||(g.ctrlKey&&d==90)){return true}if((g.ctrlKey&&d==118)||(g.ctrlKey&&d==86)||(g.shiftKey&&d==45)){return true}if(d<48||d>57){if(this.value.indexOf("-")!=0&&c&&d==45&&(this.value.length==0||(a.fn.getSelectionStart(this))==0)){return true}if(b&&d==b.charCodeAt(0)&&this.value.indexOf(b)!=-1){f=false}if(d!=8&&d!=9&&d!=13&&d!=35&&d!=36&&d!=37&&d!=39&&d!=46){f=false}else{if(typeof g.charCode!="undefined"){if(g.keyCode==g.which&&g.which!=0){f=true;if(g.which==46){f=false}}else{if(g.keyCode!=0&&g.charCode==0&&g.which==0){f=true}}}}if(b&&d==b.charCodeAt(0)){if(this.value.indexOf(b)==-1){f=true}else{f=false}}}else{f=true}return f};a.fn.numeric.keyup=function(p){var k=this.value;if(k.length>0){var f=a.fn.getSelectionStart(this);var o=a.data(this,"numeric.decimal");var l=a.data(this,"numeric.negative");if(o!=""){var d=k.indexOf(o);if(d==0){this.value="0"+k}if(d==1&&k.charAt(0)=="-"){this.value="-0"+k.substring(1)}k=this.value}var c=[0,1,2,3,4,5,6,7,8,9,"-",o];var h=k.length;for(var n=h-1;n>=0;n--){var b=k.charAt(n);if(n!=0&&b=="-"){k=k.substring(0,n)+k.substring(n+1)}else{if(n==0&&!l&&b=="-"){k=k.substring(1)}}var g=false;for(var m=0;m<c.length;m++){if(b==c[m]){g=true;break}}if(!g||b==" "){k=k.substring(0,n)+k.substring(n+1)}}var q=k.indexOf(o);if(q>0){for(var n=h-1;n>q;n--){var b=k.charAt(n);if(b==o){k=k.substring(0,n)+k.substring(n+1)}}}this.value=k;a.fn.setSelection(this,f)}};a.fn.numeric.blur=function(){var b=a.data(this,"numeric.decimal");var e=a.data(this,"numeric.callback");var d=this.value;if(d!=""){var c=new RegExp("^\\d+$|\\d*"+b+"\\d+");if(!c.exec(d)){e.apply(this)}}};a.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).unbind("keypress",a.fn.numeric.keypress).unbind("blur",a.fn.numeric.blur)};a.fn.getSelectionStart=function(c){if(c.createTextRange){var b=document.selection.createRange().duplicate();b.moveEnd("character",c.value.length);if(b.text==""){return c.value.length}return c.value.lastIndexOf(b.text)}else{return c.selectionStart}};a.fn.setSelection=function(d,c){if(typeof c=="number"){c=[c,c]}if(c&&c.constructor==Array&&c.length==2){if(d.createTextRange){var b=d.createTextRange();b.collapse(true);b.moveStart("character",c[0]);b.moveEnd("character",c[1]);b.select()}else{if(d.setSelectionRange){d.focus();d.setSelectionRange(c[0],c[1])}}}}})(jQuery);